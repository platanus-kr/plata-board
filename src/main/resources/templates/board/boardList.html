<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
          crossorigin="anonymous">
    <title th:text="${board_name}"></title>
</head>
<body>
<div class="container">
    <div class="board_title">
        <h2 th:text="${board_name}"></h2>
    </div>
    <div class="board_list">
        <table class="table">
            <thead>
            <tr>
                <th class="col-md-8">제목</th>
                <th class="col-md-2">글쓴이</th>
                <th class="col-md-2">글쓴 날짜</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="article : ${articles}">
                <td>
                    <a th:href="@{|/article/${article.id}|}" th:text="${article.title}"></a>
                </td>
                <td th:text="${article.authorNickname}"></td>
                <td th:text="${#temporals.format(article.createdDate, 'MM/dd HH:mm')}"></td>
            </tr>
            </tbody>
        </table>
        <nav th:with="
                  maxPage=${5},
                  start=${(articles.number/maxPage)*maxPage + 1},
                  end=(${(articles.totalPages == 0) ? 1 : (start + (maxPage - 1) < articles.totalPages ? start + (maxPage - 1) : articles.totalPages)})"
             aria-label="Page navigation">
            <ul class=" pagination justify-content-center">
                <li th:if="${start > 1}" class="page-item">
                    <a class="page-link" th:href="@{'/board/' + ${board_id}(page=1)}" th:text="'<<'"></a>
                </li>
                <li th:if="${start > 1}" class="page-item">
                    <a class="page-link" th:href="@{'/board/' + ${board_id}(page=${start - 1})}" th:text="'<'"></a>
                </li>
                <li class="page-item"
                    th:each="offset: ${#numbers.sequence(start, end)}"
                    th:classappend="${offset == articles.number + 1} ? 'active'">
                    <a class="page-link" th:href="@{'/board/' + ${board_id}(page=${offset})}"
                       th:text="${offset}"></a>
                </li>
                <li th:if="${end < articles.totalPages}" class="page-item">
                    <a class="page-link" th:href="@{'/board/' + ${board_id}(page=${start + maxPage})}"
                       th:text="'>'"></a>
                </li>
                <li th:if="${end < articles.totalPages}" class="page-item">
                    <a class="page-link" th:href="@{'/board/' + ${board_id}(page=${articles.totalPages})}"
                       th:text="'>>'"></a>
                </li>
            </ul>
        </nav>
    </div>
    <div class="board_button">
        <a class="btn btn-primary btn-floating m-1"
           th:href="@{|/board/${board_id}/write|}" role="button">
            글쓰기
        </a>
    </div>
</div>
</body>
</html>